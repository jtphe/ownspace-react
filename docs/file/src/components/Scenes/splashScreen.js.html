<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../../">
  <title data-ice="title">src/components/Scenes/splashScreen.js</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
</head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./">Home</a>
  
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#api">api</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-api">api</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-home">components/Home</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Home">Home</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-MenuPlus">MenuPlus</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-login">components/Login</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-GenerateTotp">GenerateTotp</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Login">Login</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-SecondAuthScreen">SecondAuthScreen</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-TotpAuthScreen">TotpAuthScreen</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#components-menu">components/Menu</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-IconMenu">IconMenu</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-NavMenu">NavMenu</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#constants">constants</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-RECURRING_ROLE">RECURRING_ROLE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ROLE_ONE">ROLE_ONE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ROLE_THREE">ROLE_THREE</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ROLE_TWO">ROLE_TWO</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#router">router</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-AppRouter">AppRouter</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#shared-avatar">shared/Avatar</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Avatar">Avatar</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#shared-clienttext">shared/ClientText</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-TextClient">TextClient</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#shared-custombutton">shared/CustomButton</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-CustomButton">CustomButton</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#shared-header">shared/Header</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Header">Header</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-WithBack">WithBack</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#shared-logo">shared/Logo</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-Logo">Logo</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#shared-progressbar">shared/ProgressBar</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/shared/ProgressBar/index.js~Animations.html">Animations</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#shared-text">shared/Text</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-TextHelvetica">TextHelvetica</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#utils">utils</a><span data-ice="kind" class="kind-function">F</span><span data-ice="name"><span><a href="function/index.html#static-function-showToast">showToast</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-mimeType">mimeType</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/components/Scenes/splashScreen.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">/* eslint-disable global-require */
import React from &apos;react&apos;;
import { ImageBackground, StyleSheet, Animated, Image } from &apos;react-native&apos;;
import Text from &apos;@shared/Text&apos;;
import Logo from &apos;@shared/Logo/images/os_logo.png&apos;;
import { ifIphoneX } from &apos;react-native-iphone-x-helper&apos;;
import { Actions } from &apos;react-native-router-flux&apos;;
import i18n from &apos;@i18n/i18n&apos;;
import { connect } from &apos;react-redux&apos;;
import { createSelector } from &apos;reselect&apos;;
import { getToken } from &apos;@store/modules/user/selectors&apos;;
import * as Font from &apos;expo-font&apos;;

/**
 * Connect to the store and extract data
 */
const mapStateToProps = createSelector(getToken, token =&gt; {
  return {
    isLoggedIn: token !== null
  };
});

/**
 * Require the client font
 */
const clientFont = {
  // eslint-disable-next-line global-require
  DejaVuSans: require(&apos;../../../assets/fonts/DejaVuSans.ttf&apos;)
};

/**
 * Require OwnSpace font
 */
const helveticaFont = {
  // eslint-disable-next-line global-require
  HelveticaNeue: require(&apos;../../../assets/fonts/HelveticaNeue.ttf&apos;)
};

/**
 * The SplashScreen class
 */
class SplashScreen extends React.Component {
  /**
   * SplashScreen constructor
   * @param {props} props - SplashScreen props
   */
  constructor(props) {
    super(props);

    /**
     * logoAnime: The logo image animation |
     * logoText: The logo text animation
     * @type {{logoAnime: Animated, logoText: Animated}}
     */
    this.state = {
      logoAnime: new Animated.Value(0),
      logoText: new Animated.Value(0)
    };
  }

  /**
   * Load client and OwnSpace fonts when componentWillMount
   */
  UNSAFE_componentWillMount() {
    this.loadClientFont();
    this.loadOwnSpaceFont();
  }

  /**
   * Make animations when componentDidMount
   */
  componentDidMount() {
    const { logoAnime, logoText } = this.state;
    const { isLoggedIn } = this.props;

    Animated.parallel([
      Animated.spring(logoAnime, {
        toValue: 1,
        tension: 10,
        friction: 2,
        duration: 1500
      }).start(),

      Animated.timing(logoText, {
        toValue: 1,
        duration: 2000
      })
    ]).start(() =&gt; {
      isLoggedIn ? Actions.home({ isLoggedIn }) : Actions.login();
    });
  }

  /**
   * Load client&apos;s font
   */
  loadClientFont = async () =&gt; {
    await Font.loadAsync(clientFont);
  };

  /**
   * Load Ownspace&apos;s font
   */
  loadOwnSpaceFont = async () =&gt; {
    await Font.loadAsync(helveticaFont);
  };

  /**
   * Render the SplashScreen class
   * @returns {React.Component} - SplashScreen class
   */
  render() {
    const { logoAnime, logoText } = this.state;

    return (
      &lt;ImageBackground
        source={require(&apos;@images/background_ownspace.png&apos;)}
        style={styles.container}
      &gt;
        &lt;Animated.View
          style={[
            {
              opacity: logoAnime,
              top: logoAnime.interpolate({
                inputRange: [0, 1],
                outputRange: [80, 0]
              })
            },
            styles.containerLogo
          ]}
        &gt;
          &lt;Image source={Logo} style={styles.logo} /&gt;
        &lt;/Animated.View&gt;
        &lt;Animated.View style={[{ opacity: logoText }, styles.containerSlogan]}&gt;
          &lt;Text style={styles.sloganPartOne}&gt;
            {i18n.t(&apos;splashScreen.sloganPartOne&apos;)}
          &lt;/Text&gt;
          &lt;Text style={styles.sloganPartTwo}&gt;
            {i18n.t(&apos;splashScreen.sloganPartTwo&apos;)}
          &lt;/Text&gt;
        &lt;/Animated.View&gt;
      &lt;/ImageBackground&gt;
    );
  }
}

/**
 * Styles of the SplashScreen class
 */
const styles = StyleSheet.create({
  container: {
    flex: 1,
    alignItems: &apos;center&apos;
  },
  containerSlogan: {
    flexDirection: &apos;row&apos;,
    justifyContent: &apos;flex-end&apos;,
    marginBottom: 24
  },
  sloganPartOne: { color: &apos;white&apos;, fontSize: 34, paddingTop: 2 },
  sloganPartTwo: { fontWeight: &apos;bold&apos;, color: &apos;white&apos;, fontSize: 36 },
  logo: { width: 250, height: 250 },
  containerLogo: {
    justifyContent: &apos;flex-start&apos;,
    flex: 1,
    ...ifIphoneX(
      {
        paddingTop: 100,
        paddingBottom: 70
      },
      {
        paddingTop: 60,
        paddingBottom: 40
      }
    )
  }
});

export default connect(mapStateToProps)(SplashScreen);
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.1.0)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
